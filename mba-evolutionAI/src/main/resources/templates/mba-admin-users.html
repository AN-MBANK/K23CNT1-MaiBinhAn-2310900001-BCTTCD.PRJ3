<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Quản lý Khách hàng - Admin</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-slate-800">

<div th:replace="~{fragments/mba-header :: navbar}"></div>

<div class="flex max-w-7xl mx-auto px-4 py-8">
    <div th:replace="~{fragments/mba-admin-sidebar :: sidebar}"></div>

    <main class="flex-1 p-8 w-full">
    <div class="flex justify-between items-center mb-6">
        <h1 class="text-2xl font-bold text-gray-900">Danh sách Khách hàng</h1>
        <span class="bg-orange-100 text-orange-800 text-sm font-medium px-3 py-1 rounded-full">
            Tổng: <span th:text="${users.size()}">0</span> tài khoản
        </span>
    </div>

    <div class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden">
        <table class="w-full text-sm text-left">
            <thead class="bg-gray-50 text-gray-500 uppercase font-medium border-b">
            <tr>
                <th class="px-6 py-4">ID</th>
                <th class="px-6 py-4">Thông tin</th>
                <th class="px-6 py-4">Email</th>
                <th class="px-6 py-4">Vai trò</th>
                <th class="px-6 py-4 text-center">Hành động</th>
            </tr>
            </thead>
            <tbody class="divide-y divide-gray-100">
            <tr th:each="user : ${users}" class="hover:bg-gray-50 transition">
                <td class="px-6 py-4 font-bold text-gray-500" th:text="'#' + ${user.mbaUserId}"></td>
                <td class="px-6 py-4">
                    <div class="font-bold text-gray-900" th:text="${user.mbaUserFullName}"></div>
                    <div class="text-xs text-gray-500" th:text="'@' + ${user.mbaUsername}"></div>
                </td>
                <td class="px-6 py-4 text-gray-600" th:text="${user.mbaUserEmail}"></td>
                <td class="px-6 py-4">
                    <span th:if="${user.mbaRole == 'ADMIN'}" class="px-2 py-1 bg-purple-100 text-purple-700 rounded-md text-xs font-bold">Quản trị viên</span>
                    <span th:if="${user.mbaRole != 'ADMIN'}" class="px-2 py-1 bg-gray-100 text-gray-700 rounded-md text-xs font-bold">Khách hàng</span>
                </td>
                <td class="px-6 py-4 text-center">
                    <a th:href="@{/mba-admin/users/delete/{id}(id=${user.mbaUserId})}"
                       onclick="return confirm('Bạn có chắc muốn xóa tài khoản này?')"
                       class="text-red-500 hover:text-red-700 hover:underline">Xóa</a>
                </td>
            </tr>
            </tbody>
        </table>
    </div>

<div class="max-w-7xl mx-auto px-4 pt-6">
    <a th:href="@{/mba-admin}"
       class="inline-flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 hover:text-blue-600 hover:border-blue-300 transition-all shadow-sm">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"/></svg>
        Quay lại Dashboard
    </a>
</div>
    </main>
</div>
</body>
</html>