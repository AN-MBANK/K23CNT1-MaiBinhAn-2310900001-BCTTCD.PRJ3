<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<body>

<div th:fragment="card(product)"
     class="group relative bg-white rounded-2xl border border-gray-100 shadow-sm hover:shadow-2xl hover:shadow-blue-500/10 transition-all duration-300 overflow-hidden flex flex-col h-full">

    <div th:if="${product.mbaOriginalPrice > product.mbaPrice}"
         class="absolute top-3 left-3 z-10 bg-red-500 text-white text-[10px] font-bold px-2 py-1 rounded-md shadow-lg shadow-red-500/30 animate-pulse">
        GIẢM GIÁ
    </div>

    <div class="h-56 p-6 flex items-center justify-center bg-gray-50 relative overflow-hidden group-hover:bg-blue-50/30 transition-colors">
        <img th:src="${product.mbaImage}"
             th:alt="${product.mbaName}"
             class="h-full w-full object-contain mix-blend-multiply transform group-hover:scale-110 transition-transform duration-500 ease-out" />

        <div class="absolute inset-x-0 bottom-0 p-4 translate-y-full group-hover:translate-y-0 transition-transform duration-300 flex gap-2 justify-center">
            <button th:onclick="'addToCart(' + ${product.mbaProductId} + ')'"
                    class="flex-1 bg-slate-900 text-white py-2.5 rounded-xl font-bold text-sm shadow-lg hover:bg-blue-600 transition flex items-center justify-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="8" cy="21" r="1"/><circle cx="19" cy="21" r="1"/><path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"/></svg>
                Thêm giỏ
            </button>
            <a th:href="@{'/product/' + ${product.mbaProductId}}"
               class="w-10 h-10 bg-white text-gray-700 border border-gray-200 rounded-xl flex items-center justify-center hover:bg-gray-50 hover:text-blue-600 transition shadow-sm" title="Xem chi tiết">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/></svg>
            </a>
        </div>
    </div>

    <div class="p-5 flex-1 flex flex-col">
        <p class="text-[10px] font-bold text-blue-500 uppercase tracking-wider mb-1" th:text="${product.mbaCategory}">Category</p>

        <h3 class="font-bold text-gray-800 text-base mb-2 line-clamp-2 hover:text-blue-600 transition cursor-pointer"
            th:text="${product.mbaName}">Tên sản phẩm</h3>

        <div class="flex items-center gap-0.5 mb-3">
            <th:block th:each="i : ${#numbers.sequence(1, 5)}">
                <svg th:class="${i <= 4} ? 'w-3 h-3 text-yellow-400 fill-yellow-400' : 'w-3 h-3 text-gray-300'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
            </th:block>
            <span class="text-xs text-gray-400 ml-1">(12 đánh giá)</span>
        </div>

        <div class="mt-auto pt-3 border-t border-gray-50 flex items-center justify-between">
            <div>
                <span class="block text-lg font-extrabold text-slate-900 currency-symbol"
                      th:text="${#numbers.formatDecimal(product.mbaPrice, 0, 'POINT', 0, 'POINT')}"></span>
                <span th:if="${product.mbaOriginalPrice > product.mbaPrice}"
                      class="text-xs text-gray-400 line-through currency-symbol"
                      th:text="${#numbers.formatDecimal(product.mbaOriginalPrice, 0, 'POINT', 0, 'POINT')}"></span>
            </div>
        </div>
    </div>

    <style>
        .currency-symbol::after { content: " ₫"; }
    </style>
</div>

</body>
</html>