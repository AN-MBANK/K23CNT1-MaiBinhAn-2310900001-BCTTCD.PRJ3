<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cảm ơn bạn đã đặt hàng! | MbaEvolutionAI</title>
    <link rel="stylesheet" th:href="@{/assets/index.css}" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: { 600: '#16a34a', 700: '#15803d' } // Xanh lá đậm
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50 text-slate-800 antialiased font-sans">

<div class="max-w-4xl mx-auto px-4 py-12 min-h-screen">
    <div class="bg-white p-6 md:p-10 rounded-2xl shadow-xl border border-gray-100 text-center">

        <div class="mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="text-green-600">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><path d="M22 4 12 14.01l-3-3"/>
            </svg>
        </div>

        <h1 class="text-3xl md:text-4xl font-extrabold text-gray-900 mb-2">ĐẶT HÀNG THÀNH CÔNG!</h1>
        <p class="text-gray-500 mb-8">Cảm ơn bạn đã tin tưởng MbaEvolutionAI. Đơn hàng của bạn đang được xử lý.</p>

        <div class="flex justify-center mb-10">
            <div class="w-full max-w-sm border border-gray-200 rounded-xl overflow-hidden shadow-sm bg-white">
                <div class="bg-blue-600 text-white py-3 font-bold uppercase tracking-wide text-sm">
                    Quét mã thanh toán nhanh
                </div>
                <div class="p-6 flex flex-col items-center">
                    <p class="text-sm text-gray-500 mb-4">Mở ứng dụng ngân hàng để quét mã</p>

                    <img th:src="@{'https://img.vietqr.io/image/MB-0333666999-compact.png?amount=' + ${order.mbaTotalAmount} + '&addInfo=THANH TOAN DH ' + ${order.mbaOrderId} + '&accountName=MAI BINH AN'}"
                         alt="QR Code Thanh Toán"
                         class="w-64 h-auto border-4 border-white shadow-md rounded-lg mb-4" src="">

                    <div class="w-full bg-gray-50 p-4 rounded-lg text-left text-sm space-y-2 border border-gray-100">
                        <div class="flex justify-between">
                            <span class="text-gray-500">Ngân hàng:</span>
                            <span class="font-bold text-blue-800">MB Bank</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-500">Số tài khoản:</span>
                            <span class="font-bold text-gray-800 tracking-wider">0333 666 999</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-500">Chủ tài khoản:</span>
                            <span class="font-bold text-gray-800 uppercase">MAI BINH AN</span>
                        </div>
                        <div class="flex justify-between border-t border-gray-200 pt-2 mt-2">
                            <span class="text-gray-500">Nội dung:</span>
                            <span class="font-bold text-red-600" th:text="'THANH TOAN DH ' + ${order.mbaOrderId}">...</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-500">Số tiền:</span>
                            <span class="font-bold text-green-600 text-base" th:text="${#numbers.formatDecimal(order.mbaTotalAmount, 0, 'POINT', 0, 'COMMA')} + ' VND'">...</span>
                        </div>
                    </div>

                    <div class="mt-4 flex items-start gap-2 text-xs text-yellow-700 bg-yellow-50 p-3 rounded border border-yellow-100 text-left">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mt-0.5 shrink-0"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>
                        <span>Sau khi chuyển khoản, hệ thống sẽ tự động xác nhận hoặc nhân viên sẽ liên hệ với bạn trong giây lát.</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="border-t border-gray-100 pt-8 text-left">
            <h2 class="text-lg font-bold text-gray-900 mb-4 flex items-center gap-2">
                Thông tin đơn hàng <span class="text-gray-400">#<span th:text="${order.mbaOrderId}"></span></span>
            </h2>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 text-sm">
                <div class="space-y-3">
                    <div class="flex justify-between border-b border-dashed border-gray-200 pb-2">
                        <span class="text-gray-500">Ngày đặt hàng</span>
                        <span class="font-medium" th:text="${#temporals.format(order.mbaOrderDate, 'dd-MM-yyyy HH:mm')}"></span>
                    </div>
                    <div class="flex justify-between border-b border-dashed border-gray-200 pb-2">
                        <span class="text-gray-500">Trạng thái</span>
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800" th:text="${order.mbaStatus}">PENDING</span>
                    </div>
                    <div class="flex justify-between border-b border-dashed border-gray-200 pb-2">
                        <span class="text-gray-500">Người nhận</span>
                        <span class="font-medium" th:text="${order.mbaCustomerName}"></span>
                    </div>
                </div>
                <div class="space-y-3">
                    <div class="flex justify-between border-b border-dashed border-gray-200 pb-2">
                        <span class="text-gray-500">Phương thức TT</span>
                        <span class="font-medium" th:text="${order.mbaPaymentMethod}"></span>
                    </div>
                    <div class="flex justify-between border-b border-dashed border-gray-200 pb-2">
                        <span class="text-gray-500">Tổng thanh toán</span>
                        <span class="font-bold text-xl text-red-600" th:text="${#numbers.formatDecimal(order.mbaTotalAmount, 0, 'POINT', 0, 'COMMA')} + ' đ'"></span>
                    </div>
                </div>
            </div>
        </div>

        <h3 class="text-lg font-bold mt-8 mb-4 text-left">Chi tiết sản phẩm</h3>
        <div class="overflow-hidden rounded-lg border border-gray-200">
            <table class="min-w-full divide-y divide-gray-200">
                <thead class="bg-gray-50">
                <tr>
                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Sản phẩm</th>
                    <th scope="col" class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">SL</th>
                    <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Đơn giá</th>
                    <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Thành tiền</th>
                </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-200">
                <tr th:each="detail : ${orderDetails}">
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 text-left" th:text="${detail.mbaProduct.mbaName}"></td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center" th:text="${detail.mbaQuantity}"></td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-right" th:text="${#numbers.formatDecimal(detail.mbaPrice, 0, 'POINT', 0, 'COMMA')}"></td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900 text-right"
                        th:with="subtotal=${detail.mbaPrice * detail.mbaQuantity}"
                        th:text="${#numbers.formatDecimal(subtotal, 0, 'POINT', 0, 'COMMA')}"></td>
                </tr>
                </tbody>
            </table>
        </div>

        <div class="mt-10 flex flex-col sm:flex-row justify-center gap-4">
            <a th:href="@{/}" class="inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors">
                Tiếp tục mua sắm
            </a>

            <a th:if="${order.user != null}" th:href="@{/user-orders}" class="inline-flex items-center justify-center px-6 py-3 border border-gray-300 shadow-sm text-base font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors">
                Xem lịch sử đơn hàng
            </a>
        </div>
    </div>
</div>

</body>
</html>